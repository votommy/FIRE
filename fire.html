<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Tommy Vo | Software Developer</title>
        <link rel="stylesheet" href="fire.css">
        <link rel="stylesheet" href="bubbles.css">
    </head>
    <body>
        <main>
            <ul class="bubbles">
                <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
            </ul>
            
            <article>
                <div class="container">
                    <section><span class="anchor" id="aboutMe"></span>
                        <div class="blurBox">
                            <span class="h1">See when you can retire given your lifestyle.</span>
                            <br><br>
                            <span>Monthly Spending in Retirement: </span><span id="labelFront">$</span><input id="spending" placeholder="0.00" type="number"><br><br>
                            <span>Current Investment: </span><span id="labelFront">$</span><input id="investment" placeholder="0.00" type="number"><br><br>
                            <span>Annual Contribution: </span><span id="labelFront">$</span><input id="annualContribution" placeholder="0.00" type="number"><br><br>
                            <span>Return Rate: </span><span id="labelFront">%</span><input id="returnRate" placeholder="0.0" type="number"><br><br>
                            <span>Current Age: </span><span id="label"></span><input id="age" placeholder="0" type="number"><span id="labelEnd">years</span><br><br>
                            <button onclick="calculate()">Calculate</button>
                            <hr>
                            <p id="results"></p>
                        </div>
                    </section>
                </div>
            </article>
        </main>
        
        <script>
            function calculate() {
                const getSpending = document.getElementById("spending");
                const getInvestment = document.getElementById("investment");
                const getAnnualContribution = document.getElementById("annualContribution");
                const getReturnRate = document.getElementById("returnRate");
                const retirementGoal = (getSpending.value / (getReturnRate.value / 100)) * 12;
                const getAge = document.getElementById("age");
                
                let spending = getSpending.value;
                let investment = getInvestment.value;
                let annualContribution = getAnnualContribution.value;
                const returnRate = (getReturnRate.value / 100) + 1;
                let age = getAge.value;
                
                let year = new Date().getFullYear();
                let count = 1;
                let xtraDigit = "0";
                let retirementMarker = "";
                let retireYet = 0;
                const endAge = 65;
                
                const results = document.getElementById("results");
                var text = "";

                while (age <= endAge) {
                    if (count >= 10) {
                        xtraDigit = "";
                    }
                    if (investment >= retirementGoal && retireYet == 0) {
                        retirementMarker = " <<< This is when you can retire!";
                        retireYet = 1;
                        if (age > (endAge - 10)) { // Always show at LEAST 10 years after retirement
                            endAge = age + 10;
                        }
                    }
                    let label = xtraDigit.concat(count).concat(". Age ") + age + " (" + year + ")" + ": ";
                    text += (label + new Intl.NumberFormat('en-US', {style: 'currency', currency: 'USD'}).format(investment) + retirementMarker + "<br>");
                    results.innerHTML = text;
                    investment *= returnRate;
                    investment = parseFloat(investment) + parseFloat(annualContribution);
                    age++;
                    year++;
                    count++;
                    retirementMarker = "";
                }
            }
        </script>
    </body>
</html>